# 📈 **StockMate**
### 🔗 https://stockmate.kro.kr/stockmate/ 

---

## 📋 **프로젝트 소개**

---
### 사용자가 미국 주식을 효과적으로 관리할 수 있도록 돕는 주식 포트폴리오 관리 웹 애플리케이션입니다.
- 포트폴리오 및 종목별 실시간 수익률 확인
- 한국투자증권 Open API를 활용한 실시간 주가 연동
- 가상 스레드와 버킷 알고리즘을 적용하여 대규모 동시 시세 조회 최적화
- Redis를 이용한 토큰 관리 및 주가 캐싱 
- Thymeleaf 기반 UI 제공

<br>

## 📌 주요 기능

---
### 📊 포트폴리오 & 홀딩 & 관심종목 관리

- 포트폴리오 조회, 생성, 수정, 삭제
- 홀딩 조회, 생성, 수정, 삭제
- 관심종목 조회, 생성, 삭제
- 종목 검색

### ⚡ 실시간 시세 & 수익률 계산

- 한국투자증권 Open API로 실시간 주가 조회
- SSE(Server-Sent Events) 기반 실시간 수익률 반영
- 종목별 수익률 자동 계산

### 📀 데이터 관리

- 주 1회 주식 종목 리스트 업데이트
    - 새로운 주식 추가
    - 상장폐지된 종목은 필드로 체크 후, 검색 결과에서 제외
- 한국투자증권 Open API에 시세를 요청할 조회용 테이블 생성
  - 사용자가 포트폴리오/관심종목에 종목을 추가 시 해당 조회용 테이블에 저장
- Redis에 실시간 주식 시세 저장
  - 주식 시장 시간동안 1분마다 조회용 테이블 기반으로 시세 요청
  - 새로 추가된 종목은 즉시 API 요청
- 스케줄러 또는 실시간 조회 중 예외 발생 시 이메일 알림 전송

### 🚀 백엔드 최적화

- 가상 스레드 + Bucket4j 기반 대규모 동시 요청 처리 + Rate Limit 대응
- Fetch Join을 활용하여 N+1 문제 해결
- SSE 채널 분리(포트폴리오 목록, 포트폴리오 상세, 관심종목)로 사용자가 보고 있는 화면만 시세 + 수익률 업데이트
- OSIV(false) 설정: 사용자가 SSE에 연결될 시 DB 커넥션을 반납하지 않기 때문에 false 설정

<table>
  <tr>
    <td align="center" ><strong>포트폴리오 목록</strong></td>
  </tr>
  <tr>
    <td><img src="https://github.com/user-attachments/assets/cd8234e8-e2a7-41b1-a6fc-ced5f7b984cd" 
     alt="포트폴리오 목록" width="1000"/></td>
  </tr>
</table>




